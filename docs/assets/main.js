var f=Object.defineProperty;var p=(l,t,e)=>t in l?f(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var d=(l,t,e)=>(p(l,typeof t!="symbol"?t+"":t,e),e);class b{constructor(t,e){const s={btnSelector:"[data-menu-btn]",listSelector:"[data-menu-list]",activeClass:"menu-open",parents:["html",".wrapper"],accessibility:{mediaScreen:"max-width: 1024px",role:"dialog",aria:"aria-modal"}};this.options=Object.assign(s,e),this.elements=document.querySelectorAll(t),this.menuOpen=!1,this.init()}accessibleMenu(t){const{role:e,aria:s,mediaScreen:o}=this.options.accessibility;let i=window.matchMedia(`(${o})`);i.matches?(t.setAttribute("role",e),t.setAttribute(s,!0)):(t.removeAttribute("role"),t.removeAttribute(s)),i.addEventListener("change",()=>this.accessibleMenu(t))}correctFocus(t,e){const s=t.querySelectorAll("input, a, button, textarea, [tabindex]");s.forEach(o=>{let i=s[s.length-1];o.addEventListener("blur",n=>{n.target===i&&e.focus()})}),e.addEventListener("blur",()=>s[0].focus())}closeMenu(t,e){t.forEach(s=>{document.querySelector(s).classList.remove(e),this.menuOpen=!1})}toggleMenu(t,e){t.forEach(s=>{const o=document.querySelector(s);o.classList.toggle(e),o.classList.contains(e)?this.menuOpen=!0:this.menuOpen=!1})}init(){const{btnSelector:t,listSelector:e,parents:s,activeClass:o,accessibility:i}=this.options;if(!this.elements){console.warn(`Selector ${this.elements} is not found!`);return}this.elements.forEach(n=>{const a=n.querySelector(t)||document.querySelector(t),c=n.querySelector(e)||document.querySelector(e),m=n.querySelectorAll("a");c&&Object.keys(i)&&this.accessibleMenu(c),a&&s&&a.addEventListener("click",()=>{this.toggleMenu(s,o),this.menuOpen&&this.correctFocus(c,a)}),document.addEventListener("keydown",({code:r})=>r==="Escape"&&this.closeMenu(s,o)),m.forEach(r=>r.addEventListener("click",()=>this.closeMenu(s,o)))})}}class v{constructor(t,e){const s={units:"rem"};this.options=Object.assign(s,e),this.selector=t||"[data-auto-calc]",this.elements=document.querySelectorAll(this.selector),this.init()}setValue(t,e,s){const{units:o}=this.options,i=o==="rem"?s/16+"rem":o==="em"?s/16+"em":s+"px";document.querySelector(":root").style.setProperty(`--${t}-${e}`,i)}calcValue(t,e){const[s,o]=e;if(o==="width"){const a=t.offsetWidth;this.setValue(s,o,a);return}if(o==="height"){const a=t.offsetHeight;this.setValue(s,o,a);return}const i=[t.offsetWidth,t.offsetHeight],n=["width","height"];i.forEach((a,c)=>this.setValue(s,n[c],a))}init(){if(!this.elements.length){console.warn(`[AutoCalc]: Selector ${this.selector} is not found!`);return}this.elements.forEach(t=>{const e=t.getAttribute("data-auto-calc").toLowerCase().replaceAll(" ","").split(",");window.addEventListener("load",()=>this.calcValue(t,e)),window.addEventListener("resize",()=>this.calcValue(t,e))})}}class y{constructor(t,e){const s={offset:"auto",hiddenClass:"header-hidden",backgroundClass:!1,showScrollEnd:!0,parents:["html",".wrapper"]};this.selector=t||".header",this.elements=document.querySelectorAll(this.selector),this.options=Object.assign(s,e),this.lastScroll=0,this.init()}addClass(t,e){t.forEach(s=>document.querySelector(s).classList.add(e))}removeClass(t,e){t.forEach(s=>document.querySelector(s).classList.remove(e))}scrollPosition(){return window.pageYOffset||document.documentElement.scrollTop}containsHidden(t){const{hiddenClass:e}=this.options;return t.classList.contains(e)}hideOnScroll(t,e){const{hiddenClass:s,parents:o}=this.options;this.scrollPosition()>this.lastScroll&&!this.containsHidden(t)&&this.scrollPosition()>e&&(t.classList.add(s),this.addClass(o,s)),this.scrollPosition()<this.lastScroll&&this.containsHidden(t)&&(t.classList.remove(s),this.removeClass(o,s))}showScrollEnd(t){const{hiddenClass:e}=this.options;window.addEventListener("scrollend",s=>{t.classList.contains(e)&&t.classList.remove(e)})}addBgClass(t,e){const{backgroundClass:s,parents:o}=this.options;this.scrollPosition()>e&&(t.classList.add(s),this.addClass(o,s)),this.scrollPosition()||(t.classList.remove(s),this.removeClass(o,s))}init(){if(!this.elements.length){console.warn(`[Header]: Selector ${this.selector} is not found!`);return}let{offset:t,backgroundClass:e,showScrollEnd:s}=this.options;this.elements.forEach(o=>{t=t==="auto"?o.offsetHeight/2:t,window.addEventListener("scroll",i=>{this.hideOnScroll(o,t),e&&this.addBgClass(o,t),this.lastScroll=this.scrollPosition(o)}),s&&this.showScrollEnd(o)})}}class S{constructor(t,e){const s={listSelector:"[data-running-line-list]",quantity:!1};this.selector=t||"[data-running-line]",this.options=Object.assign(s,e),this.elements=document.querySelectorAll(this.selector),this.init()}copyItem(t,e){const s=t.cloneNode(!0);s.setAttribute("aria-hidden",!0),e.insertAdjacentElement("beforeend",s)}init(){if(!this.elements.length){console.warn(`[RunningLine]: Selector '${this.selector}' is not found!`);return}const{listSelector:t,quantity:e}=this.options;this.elements.forEach(s=>{const o=s.querySelector(t)||s.children[0],i=Array.from(o.children);if(e)for(let n=0;n<e;n++)this.copyItem(i[0],o);else i.forEach(n=>{this.copyItem(n,o)})})}}class E{constructor(t,e){const s={activeClass:"active",tabSelector:"[data-tab]"};this.options=Object.assign(s,e),this.selector=t||"[data-tab-button]",this.buttons=document.querySelectorAll(this.selector),this.tabs=document.querySelectorAll(this.options.tabSelector),this.init()}addActiveClass(...t){const{activeClass:e}=this.options;t.forEach(s=>s.classList.add(e))}removeActiveForAll(t,e){const{activeClass:s}=this.options;[...t,...e].forEach(i=>i.classList.remove(s))}init(){if(!this.buttons.length){console.warn(`[Tabs]: Selector '${this.selector}' is not found!`);return}this.addActiveClass(this.buttons[0],this.tabs[0]),this.buttons.forEach(t=>{t.addEventListener("click",e=>{const s=t.tagName==="A",o=t.getAttribute(s?"href":"data-tab-button"),i=document.querySelector(`${o}`);this.removeActiveForAll(this.buttons,this.tabs),this.addActiveClass(t,i),s&&e.preventDefault()})})}}function u(l,t){for(const e in t)t[e]instanceof Object&&e in l&&Object.assign(t[e],u(l[e],t[e]));return{...l,...t}}class g{constructor(t,e){d(this,"outsideClickHandler",(t,e)=>{const s=document.querySelector(this.options.modalBox.selector),o=document.querySelector(this.options.modalBoxContainer.selector);t.composedPath().includes(e),t.target===o&&this.closeModal(e,s)});let s={closeBtn:{innerHTML:"close",ariaLabel:"Close modal"},isOpen:!0,createStyle:!0,activeClass:"active-modal",modalBox:{selector:"[data-modal-box]",class:"modal-box",data:"data-modal-box",background:"rgba(0, 0, 0, 0.7)"},modalBoxContainer:{selector:"[data-modal-box-container]",class:"modal-box__container",data:"data-modal-box-container"},moreCloseBtnSelector:"[data-modal-custom-close-btn]"};this.options=u(s,e),this.selector=t||"[data-modal]",this.allModals=document.querySelectorAll(t).length?document.querySelectorAll(t):document.querySelectorAll("[data-modal]"),this.isActive=!1,this.previousActiveElement=null,this.eventHandlers={},this.event()}on(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)}triggerEvent(t,e){const s=this.eventHandlers[t];s&&s.forEach(o=>o(e))}createModalBox(){const t=document.createElement("div"),e=document.body,s=getComputedStyle(e);t.innerHTML=`<div ${this.options.modalBoxContainer.class?`class=${this.options.modalBoxContainer.class}`:""} ${this.options.modalBoxContainer.data?`${this.options.modalBoxContainer.data}`:"data-modal-box-container"}></div>`,t.setAttribute(this.options.modalBox.data,""),t.classList.add(this.options.modalBox.class),s.position==="static"&&(e.style.position="relative"),e.insertAdjacentElement("beforeend",t)}createStyles(){const t=document.createElement("style");t.classList.add("style-modal-box"),t.innerHTML=`
				html.${this.options.activeClass} body {
					overflow: hidden;
				}
				${this.options.modalBox.selector} {
					background: ${this.options.modalBox.background};
					position: fixed;
					z-index: 100;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					overflow: auto;

					/* ЭТИ СТИЛИ ВАЖНЫ ДЛЯ ТОГО, ЧТОБЫ СПРЯТАТЬ МОДАЛКУ */
					pointer-events: none;
					opacity: 0;
					visibility: hidden;
					transition: all 0.5s;
				}

				${this.options.modalBox.selector}.${this.options.activeClass} {
					opacity: 1;
					visibility: visible;
					pointer-events: auto;
				}

				${this.options.modalBoxContainer.selector} {
					display: flex;
					align-items: center;
					justify-content: center;
					padding: 30px;
					min-height: 100%; /* обязательно, чтобы растянулся на всю высоту modal-box и центрировался */
				}
				
				${this.selector} {
					/* ЭТИ СТИЛИ ВАЖНЫ ДЛЯ ТОГО, ЧТОБЫ СПРЯТАТЬ МОДАЛКУ */
					transform: translateY(-100%);
					visibility: hidden;
					position: absolute;
					transition: all 0.5s;
				}
				${this.selector}.${this.options.activeClass} {
					visibility: visible;
					position: initial;
					transform: translateY(0);
				}
			`.trim().replaceAll("	","").replaceAll(`
`,""),document.head.insertAdjacentElement("beforeend",t)}createCloseBtn(t){const e=t.getAttribute("data-modal")||t.getAttribute("id"),s=document.createElement("button");s.setAttribute("type","button"),s.innerHTML=this.options.closeBtn.innerHTML,s.setAttribute("aria-label",this.options.closeBtn.ariaLabel),s.classList.add("modal-btn-close"),s.setAttribute("data-modal-btn-close",e),t.insertAdjacentElement("beforeend",s)}closeModal(t){if(!t){console.error("The modal window was not found");return}const e=document.querySelector(this.options.modalBox.selector);if(this.isActive=!1,this.triggerEvent("close",{modal:t}),document.documentElement.classList.remove(this.options.activeClass),t.classList.remove(this.options.activeClass),e.classList.remove(this.options.activeClass),this.previousActiveElement&&(this.previousActiveElement.focus(),setTimeout(()=>this.previousActiveElement=null,100)),document.removeEventListener("click",s=>this.outsideClickHandler(s,t)),this.options.moreCloseBtnSelector){let s=t.querySelectorAll(this.options.moreCloseBtnSelector);if(s.length===0)return;s.forEach(o=>{o.removeEventListener("click",()=>this.closeModal(t))})}}openModal(t){if(!t){console.error("The modal window was not found");return}const e=document.querySelector(this.options.modalBox.selector);if(this.isActive=!0,this.previousActiveElement=document.activeElement,this.triggerEvent("open",{modal:t}),document.documentElement.classList.add(this.options.activeClass),t.classList.add(this.options.activeClass),e.classList.add(this.options.activeClass),document.addEventListener("click",s=>this.outsideClickHandler(s,t)),this.options.moreCloseBtnSelector){let s=t.querySelectorAll(this.options.moreCloseBtnSelector);if(s.length===0)return;s.forEach(o=>{o.addEventListener("click",()=>this.closeModal(t))})}}lockFocus(t){let e=t.querySelectorAll("input, a, button, textarea, [tabindex]");if(e.length===0)return;const s=e[0];setTimeout(()=>s.focus(),100);const o=e[e.length-1];e.forEach(i=>{i.addEventListener("keydown",n=>{n.key==="Tab"&&(n.shiftKey?document.activeElement===s&&(n.preventDefault(),o.focus()):document.activeElement===o&&(n.preventDefault(),s.focus()))})})}setAccessibleAttr(t){t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true")}event(){if(this.allModals.length){let t=document.querySelector(this.options.modalBox.selector);t||(this.createModalBox(),t=document.querySelector(this.options.modalBox.selector)),t&&this.options.createStyle&&this.createStyles(),this.allModals.forEach(e=>{this.createCloseBtn(e),this.setAccessibleAttr(e),t&&document.querySelector(this.options.modalBoxContainer.selector).insertAdjacentElement("beforeend",e);const s=document.querySelectorAll("[data-modal-btn]"),o=document.querySelectorAll("[data-modal-btn-close]");s.forEach(i=>{i.addEventListener("click",n=>{let a=i.getAttribute("data-modal-btn");if(i.tagName==="A"&&(n.preventDefault(),a=i.getAttribute("href")),a){let c=document.querySelector(`[data-modal='${a}']`);if(!this.isActive){if(!c){console.error(`Modal id ${c} window was not found`);return}this.openModal(c),this.lockFocus(c)}}})}),o.forEach(i=>{i.addEventListener("click",()=>{if(this.isActive){if(!e){console.error("The modal window was not found");return}this.closeModal(e)}})}),this.options.closeOnInteractiveEl,document.addEventListener("keydown",i=>{(i.code==="Escape"||i.code==="Escape")&&this.isActive&&this.closeModal(e)})})}}}const h=document.querySelector("html").classList.contains("ru");new v;new b(".menu",{btnSelector:".burger-btn",listSelector:".menu"});new y(".header",{showScrollEnd:!1,backgroundClass:"header-bg"});new S("[data-running-line]",{quantity:15});new E;new g("[data-modal]",{closeBtn:{innerHTML:`<span>${h?"Закрыть":"Close"}</span>`,ariaLabel:h?"Закрыть модальное окно":"Close modal"}});
