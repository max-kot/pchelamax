var p=Object.defineProperty;var f=(l,t,e)=>t in l?p(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var d=(l,t,e)=>(f(l,typeof t!="symbol"?t+"":t,e),e);class v{constructor(t,e){const s={btnSelector:"[data-menu-btn]",listSelector:"[data-menu-list]",activeClass:"menu-open",parents:["html",".wrapper"],accessibility:{mediaScreen:"max-width: 1024px",role:"dialog",aria:"aria-modal"}};this.options=Object.assign(s,e),this.elements=document.querySelectorAll(t),this.menuOpen=!1,this.init()}accessibleMenu(t){const{role:e,aria:s,mediaScreen:i}=this.options.accessibility;let o=window.matchMedia(`(${i})`);o.matches?(t.setAttribute("role",e),t.setAttribute(s,!0)):(t.removeAttribute("role"),t.removeAttribute(s)),o.addEventListener("change",()=>this.accessibleMenu(t))}correctFocus(t,e){const s=t.querySelectorAll("input, a, button, textarea, [tabindex]");s.forEach(i=>{let o=s[s.length-1];i.addEventListener("blur",n=>{n.target===o&&e.focus()})}),e.addEventListener("blur",()=>s[0].focus())}closeMenu(t,e){t.forEach(s=>{document.querySelector(s).classList.remove(e),this.menuOpen=!1})}toggleMenu(t,e){t.forEach(s=>{const i=document.querySelector(s);i.classList.toggle(e),i.classList.contains(e)?this.menuOpen=!0:this.menuOpen=!1})}init(){const{btnSelector:t,listSelector:e,parents:s,activeClass:i,accessibility:o}=this.options;if(!this.elements){console.warn(`Selector ${this.elements} is not found!`);return}this.elements.forEach(n=>{const a=n.querySelector(t)||document.querySelector(t),c=n.querySelector(e)||document.querySelector(e),m=n.querySelectorAll("a");c&&Object.keys(o)&&this.accessibleMenu(c),a&&s&&a.addEventListener("click",()=>{this.toggleMenu(s,i),this.menuOpen&&this.correctFocus(c,a)}),document.addEventListener("keydown",({code:r})=>r==="Escape"&&this.closeMenu(s,i)),m.forEach(r=>r.addEventListener("click",()=>this.closeMenu(s,i)))})}}class S{constructor(t,e){const s={units:"rem"};this.options=Object.assign(s,e),this.selector=t||"[data-auto-calc]",this.elements=document.querySelectorAll(this.selector),this.init()}setValue(t,e,s){const{units:i}=this.options,o=i==="rem"?s/16+"rem":i==="em"?s/16+"em":s+"px";document.querySelector(":root").style.setProperty(`--${t}-${e}`,o)}calcValue(t,e){const[s,i]=e;if(i==="width"){const a=t.offsetWidth;this.setValue(s,i,a);return}if(i==="height"){const a=t.offsetHeight;this.setValue(s,i,a);return}const o=[t.offsetWidth,t.offsetHeight],n=["width","height"];o.forEach((a,c)=>this.setValue(s,n[c],a))}init(){if(!this.elements.length){console.warn(`[AutoCalc]: Selector ${this.selector} is not found!`);return}this.elements.forEach(t=>{const e=t.getAttribute("data-auto-calc").toLowerCase().replaceAll(" ","").split(",");window.addEventListener("load",()=>this.calcValue(t,e)),window.addEventListener("resize",()=>this.calcValue(t,e))})}}class b{constructor(t,e){const s={offset:"auto",hiddenClass:"header-hidden",backgroundClass:!1,showScrollEnd:!0,parents:["html",".wrapper"]};this.selector=t||".header",this.elements=document.querySelectorAll(this.selector),this.options=Object.assign(s,e),this.lastScroll=0,this.init()}addClass(t,e){t.forEach(s=>document.querySelector(s).classList.add(e))}removeClass(t,e){t.forEach(s=>document.querySelector(s).classList.remove(e))}scrollPosition(){return window.pageYOffset||document.documentElement.scrollTop}containsHidden(t){const{hiddenClass:e}=this.options;return t.classList.contains(e)}hideOnScroll(t,e){const{hiddenClass:s,parents:i}=this.options;this.scrollPosition()>this.lastScroll&&!this.containsHidden(t)&&this.scrollPosition()>e&&(t.classList.add(s),this.addClass(i,s)),this.scrollPosition()<this.lastScroll&&this.containsHidden(t)&&(t.classList.remove(s),this.removeClass(i,s))}showScrollEnd(t){const{hiddenClass:e}=this.options;window.addEventListener("scrollend",s=>{t.classList.contains(e)&&t.classList.remove(e)})}addBgClass(t,e){const{backgroundClass:s,parents:i}=this.options;this.scrollPosition()>e&&(t.classList.add(s),this.addClass(i,s)),this.scrollPosition()||(t.classList.remove(s),this.removeClass(i,s))}init(){if(!this.elements.length){console.warn(`[Header]: Selector ${this.selector} is not found!`);return}let{offset:t,backgroundClass:e,showScrollEnd:s}=this.options;this.elements.forEach(i=>{t=t==="auto"?i.offsetHeight/2:t,window.addEventListener("scroll",o=>{this.hideOnScroll(i,t),e&&this.addBgClass(i,t),this.lastScroll=this.scrollPosition(i)}),s&&this.showScrollEnd(i)})}}class y{constructor(t,e){const s={listSelector:"[data-running-line-list]",quantity:!1};this.selector=t||"[data-running-line]",this.options=Object.assign(s,e),this.elements=document.querySelectorAll(this.selector),this.init()}copyItem(t,e){const s=t.cloneNode(!0);s.setAttribute("aria-hidden",!0),e.insertAdjacentElement("beforeend",s)}init(){if(!this.elements.length){console.warn(`[RunningLine]: Selector '${this.selector}' is not found!`);return}const{listSelector:t,quantity:e}=this.options;this.elements.forEach(s=>{const i=s.querySelector(t)||s.children[0],o=Array.from(i.children);if(e)for(let n=0;n<e;n++)this.copyItem(o[0],i);else o.forEach(n=>{this.copyItem(n,i)})})}}class g{constructor(t,e){const s={activeClass:"active",tabSelector:"[data-tab]"};this.options=Object.assign(s,e),this.selector=t||"[data-tab-button]",this.buttons=document.querySelectorAll(this.selector),this.tabs=document.querySelectorAll(this.options.tabSelector),this.init()}addActiveClass(...t){const{activeClass:e}=this.options;t.forEach(s=>s.classList.add(e))}removeActiveForAll(t,e){const{activeClass:s}=this.options;[...t,...e].forEach(o=>o.classList.remove(s))}init(){if(!this.buttons.length){console.warn(`[Tabs]: Selector '${this.selector}' is not found!`);return}this.addActiveClass(this.buttons[0],this.tabs[0]),this.buttons.forEach(t=>{t.addEventListener("click",e=>{const s=t.tagName==="A",i=t.getAttribute(s?"href":"data-tab-button"),o=document.querySelector(`${i}`);this.removeActiveForAll(this.buttons,this.tabs),this.addActiveClass(t,o),s&&e.preventDefault()})})}}function u(l,t){for(const e in t)t[e]instanceof Object&&e in l&&Object.assign(t[e],u(l[e],t[e]));return{...l,...t}}class A{constructor(t,e){d(this,"outsideClickHandler",(t,e)=>{const s=document.querySelector(this.options.modalBox.selector),i=document.querySelector(this.options.modalBoxContainer.selector);t.composedPath().includes(e),t.target===i&&this.closeModal(e,s)});let s={closeBtn:{innerHTML:"close",ariaLabel:"Close modal"},isOpen:!0,createStyle:!0,activeClass:"active-modal",modalBox:{selector:"[data-modal-box]",class:"modal-box",data:"data-modal-box",background:"rgba(0, 0, 0, 0.7)"},modalBoxContainer:{selector:"[data-modal-box-container]",class:"modal-box__container",data:"data-modal-box-container"},moreCloseBtnSelector:"[data-modal-custom-close-btn]"};this.options=u(s,e),this.selector=t||"[data-modal]",this.allModals=document.querySelectorAll(t).length?document.querySelectorAll(t):document.querySelectorAll("[data-modal]"),this.isActive=!1,this.previousActiveElement=null,this.eventHandlers={},this.event()}on(t,e){this.eventHandlers[t]||(this.eventHandlers[t]=[]),this.eventHandlers[t].push(e)}triggerEvent(t,e){const s=this.eventHandlers[t];s&&s.forEach(i=>i(e))}createModalBox(){const t=document.createElement("div"),e=document.body,s=getComputedStyle(e);t.innerHTML=`<div ${this.options.modalBoxContainer.class?`class=${this.options.modalBoxContainer.class}`:""} ${this.options.modalBoxContainer.data?`${this.options.modalBoxContainer.data}`:"data-modal-box-container"}></div>`,t.setAttribute(this.options.modalBox.data,""),t.classList.add(this.options.modalBox.class),s.position==="static"&&(e.style.position="relative"),e.insertAdjacentElement("beforeend",t)}createStyles(){const t=document.createElement("style");t.classList.add("style-modal-box"),t.innerHTML=`
				html.${this.options.activeClass} body {
					overflow: hidden;
				}
				${this.options.modalBox.selector} {
					background: ${this.options.modalBox.background};
					position: fixed;
					z-index: 100;
					top: 0;
					left: 0;
					width: 100%;
					height: 100%;
					overflow: auto;

					/* ЭТИ СТИЛИ ВАЖНЫ ДЛЯ ТОГО, ЧТОБЫ СПРЯТАТЬ МОДАЛКУ */
					pointer-events: none;
					opacity: 0;
					visibility: hidden;
					transition: all 0.5s;
				}

				${this.options.modalBox.selector}.${this.options.activeClass} {
					opacity: 1;
					visibility: visible;
					pointer-events: auto;
				}

				${this.options.modalBoxContainer.selector} {
					display: flex;
					align-items: center;
					justify-content: center;
					padding: 30px;
					min-height: 100%; /* обязательно, чтобы растянулся на всю высоту modal-box и центрировался */
				}
				
				${this.selector} {
					/* ЭТИ СТИЛИ ВАЖНЫ ДЛЯ ТОГО, ЧТОБЫ СПРЯТАТЬ МОДАЛКУ */
					transform: translateY(-100%);
					visibility: hidden;
					position: absolute;
					transition: all 0.5s;
				}
				${this.selector}.${this.options.activeClass} {
					visibility: visible;
					position: initial;
					transform: translateY(0);
				}
			`.trim().replaceAll("	","").replaceAll(`
`,""),document.head.insertAdjacentElement("beforeend",t)}createCloseBtn(t){const e=t.getAttribute("data-modal")||t.getAttribute("id"),s=document.createElement("button");s.setAttribute("type","button"),s.innerHTML=this.options.closeBtn.innerHTML,s.setAttribute("aria-label",this.options.closeBtn.ariaLabel),s.classList.add("modal-btn-close"),s.setAttribute("data-modal-btn-close",e),t.insertAdjacentElement("beforeend",s)}closeModal(t){if(!t){console.error("The modal window was not found");return}const e=document.querySelector(this.options.modalBox.selector);if(this.isActive=!1,this.triggerEvent("close",{modal:t}),document.documentElement.classList.remove(this.options.activeClass),t.classList.remove(this.options.activeClass),e.classList.remove(this.options.activeClass),this.previousActiveElement&&(this.previousActiveElement.focus(),setTimeout(()=>this.previousActiveElement=null,100)),document.removeEventListener("click",s=>this.outsideClickHandler(s,t)),this.options.moreCloseBtnSelector){let s=t.querySelectorAll(this.options.moreCloseBtnSelector);if(s.length===0)return;s.forEach(i=>{i.removeEventListener("click",()=>this.closeModal(t))})}}openModal(t){if(!t){console.error("The modal window was not found");return}const e=document.querySelector(this.options.modalBox.selector);if(this.isActive=!0,this.previousActiveElement=document.activeElement,this.triggerEvent("open",{modal:t}),document.documentElement.classList.add(this.options.activeClass),t.classList.add(this.options.activeClass),e.classList.add(this.options.activeClass),document.addEventListener("click",s=>this.outsideClickHandler(s,t)),this.options.moreCloseBtnSelector){let s=t.querySelectorAll(this.options.moreCloseBtnSelector);if(s.length===0)return;s.forEach(i=>{i.addEventListener("click",()=>this.closeModal(t))})}}lockFocus(t){let e=t.querySelectorAll("input, a, button, textarea, [tabindex]");if(e.length===0)return;const s=e[0];setTimeout(()=>s.focus(),100);const i=e[e.length-1];e.forEach(o=>{o.addEventListener("keydown",n=>{n.key==="Tab"&&(n.shiftKey?document.activeElement===s&&(n.preventDefault(),i.focus()):document.activeElement===i&&(n.preventDefault(),s.focus()))})})}setAccessibleAttr(t){t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true")}event(){if(this.allModals.length){let t=document.querySelector(this.options.modalBox.selector);t||(this.createModalBox(),t=document.querySelector(this.options.modalBox.selector)),t&&this.options.createStyle&&this.createStyles(),this.allModals.forEach(e=>{this.createCloseBtn(e),this.setAccessibleAttr(e),t&&document.querySelector(this.options.modalBoxContainer.selector).insertAdjacentElement("beforeend",e);const s=document.querySelectorAll("[data-modal-btn]"),i=document.querySelectorAll("[data-modal-btn-close]");s.forEach(o=>{o.addEventListener("click",n=>{let a=o.getAttribute("data-modal-btn");if(o.tagName==="A"&&(n.preventDefault(),a=o.getAttribute("href")),a){let c=document.querySelector(`[data-modal='${a}']`);if(!this.isActive){if(!c){console.error(`Modal id ${c} window was not found`);return}this.openModal(c),this.lockFocus(c)}}})}),i.forEach(o=>{o.addEventListener("click",()=>{if(this.isActive){if(!e){console.error("The modal window was not found");return}this.closeModal(e)}})}),this.options.closeOnInteractiveEl,document.addEventListener("keydown",o=>{(o.code==="Escape"||o.code==="Escape")&&this.isActive&&this.closeModal(e)})})}}}class E{constructor(t,e){let s={onlyOneOpen:!1,speed:300,fixSpoilerHeightOnResize:!0,media:!1,titleSelector:"[data-spoiler-title]",contentSelector:"[data-spoiler-content]",buttonClass:"spoiler-button-title",activeClass:"spoiler-active",createdClass:"spoiler-created",createButton:!0,resetButtonStylesClass:"spoiler-styles",resetButtonStyles:`
				display: block;
				width: 100%;
				font: inherit;
				color: inherit;
				cursor: pointer;
				background: transparent;
				border: unset;
				padding: unset;
				margin: unset;
			`,create:()=>{},open:()=>{},close:()=>{},remove:()=>{}};this.selector=t||"[data-spoiler]",this.allSpoilers=document.querySelectorAll(this.selector),this.options=Object.assign(s,e),this.matchMedia=window.matchMedia(`(${this.options.media})`),this.isCreated=!1,this.event()}createButton(t){const e=t.querySelector(this.options.titleSelector?this.options.titleSelector:"[data-spoiler-title]")||t.children[0];if(e.tagName.toLowerCase()!=="button"){const s=document.createElement("button");s.classList.add(this.options.buttonClass),s.setAttribute("role","button"),e.hasAttribute("data-spoiler-title")&&(s.setAttribute("data-spoiler-title",""),e.removeAttribute("data-spoiler-title")),t.insertAdjacentElement("afterbegin",s),s.insertAdjacentElement("afterbegin",e)}}removeButton(t){const e=t.querySelector(`.${this.options.buttonClass}`);if(e){const s=e.children[0];e.hasAttribute("data-spoiler-title")&&(s.setAttribute("data-spoiler-title",""),e.removeAttribute("data-spoiler-title")),t.insertAdjacentElement("afterbegin",s),e.remove()}}resetButtonStyles(){if(this.options.resetButtonStyles&&this.options.createButton&&!document.querySelector(`.${this.options.resetButtonStylesClass}`)){const t=document.createElement("style");t.classList.add(this.options.resetButtonStylesClass),t.innerHTML=`.${this.options.buttonClass}{${this.options.resetButtonStyles}}`.trim().replaceAll("	","").replaceAll(`
`,""),document.head.insertAdjacentElement("afterbegin",t)}}returnToInitial(t){const e=t.querySelector(this.options.titleSelector?this.options.titleSelector:"[data-spoiler-title]")||t.children[0],s=t.querySelector(this.options.contentSelector?this.options.contentSelector:"[data-spoiler-content]")||t.children[1];s.scrollHeight,t.classList.remove(this.options.activeClass),e.removeAttribute("aria-expanded"),s.removeAttribute("aria-hidden"),s.style.cssText="max-height: 100%; opacity: 1; visibility: visible; will-change: max-height; transition: all var(--spoiler-animation-time, 0.3s);"}openSpoiler(t){const e=t.querySelector(this.options.titleSelector?this.options.titleSelector:"[data-spoiler-title]")||t.children[0],s=t.querySelector(this.options.contentSelector?this.options.contentSelector:"[data-spoiler-content]")||t.children[1],i=s.scrollHeight;t.classList.add(this.options.activeClass),e.setAttribute("aria-expanded",!0),s.setAttribute("aria-hidden",!1),s.style.cssText=`max-height: ${i}px; opacity: 1; visibility: visible; will-change: max-height; transition: all var(--spoiler-animation-time, 0.3s);`}closeSpoiler(t){const e=t.querySelector(this.options.titleSelector?this.options.titleSelector:"[data-spoiler-title]")||t.children[0],s=t.querySelector(this.options.contentSelector?this.options.contentSelector:"[data-spoiler-content]")||t.children[1];t.classList.remove(this.options.activeClass),e.setAttribute("aria-expanded",!1),s.setAttribute("aria-hidden",!0),s.style.cssText="max-height: 0px; opacity: 0; visibility: hidden; will-change: max-height; transition: all var(--spoiler-animation-time, 0.3s);"}clickHandler(t){this.options.onlyOneOpen&&this.allSpoilers.forEach(e=>this.closeSpoiler(e)),t.classList.contains(this.options.activeClass)?(this.options.close(this),this.closeSpoiler(t)):(this.options.open(this),this.openSpoiler(t))}createSpoiler(){this.isCreated||this.options.create(this),this.allSpoilers.forEach(t=>{t.classList.add(this.options.createdClass),t.style.cssText+=`--spoiler-animation-time: ${this.options.speed/1e3}s;`,this.options.createButton&&this.createButton(t),t.getAttribute("data-spoiler")==="active"||t.classList.contains(this.options.activeClass)?this.openSpoiler(t):this.closeSpoiler(t);const s=t.querySelector(this.options.titleSelector?this.options.titleSelector:"[data-spoiler-title]")||t.children[0];this.isCreated||s.addEventListener("click",()=>this.clickHandler(t))})}removeSpoiler(){this.isCreated&&this.options.remove(this),this.allSpoilers.forEach(t=>{t.classList.remove(this.options.createdClass),this.options.createButton&&this.removeButton(t),this.returnToInitial(t),(t.querySelector(this.options.titleSelector?this.options.titleSelector:"[data-spoiler-title]")||t.children[0]).removeEventListener("click",()=>this.clickHandler(t))})}mediaHandler(){this.matchMedia.matches?(this.createSpoiler(),this.isCreated=!0):(this.removeSpoiler(),this.isCreated=!1)}fixOpenSpoilerHeight(){this.allSpoilers.forEach(t=>{if(t.classList.contains(this.options.activeClass)){const e=t.querySelector(this.options.contentSelector?this.options.contentSelector:"[data-spoiler-content]")||t.children[1],s=e.scrollHeight;e.style.cssText=`max-height: ${s}px; opacity: 1; visibility: visible; will-change: max-height; transition: all var(--spoiler-animation-time, 0.3s);`}})}event(){this.allSpoilers.length?(this.options.fixSpoilerHeightOnResize&&(window.addEventListener("load",()=>this.fixOpenSpoilerHeight()),window.addEventListener("resize",()=>this.fixOpenSpoilerHeight())),this.options.resetButtonStyles&&this.resetButtonStyles(),this.options.media?(this.mediaHandler(),window.addEventListener("resize",()=>{this.options.media&&this.mediaHandler()})):this.createSpoiler()):console.warn(`${selector} is not found!`)}}const h=document.querySelector("html").classList.contains("ru");new S;new v(".menu",{btnSelector:".burger-btn",listSelector:".menu"});new b(".header",{showScrollEnd:!1,backgroundClass:"header-bg"});new y("[data-running-line]",{quantity:15});new g;new A("[data-modal]",{closeBtn:{innerHTML:`<span>${h?"Закрыть":"Close"}</span>`,ariaLabel:h?"Закрыть модальное окно":"Close modal"}});new E;
